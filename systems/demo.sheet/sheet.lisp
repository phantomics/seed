;; sheet.lisp
;; Seed-interfaced file - do not edit manually

(in-package #:demo.sheet)
(defvar *profile* nil)
(defvar *graph-nodes* nil)
(defvar *active-graph-item* nil)
(defvar *input* nil)

:cells
(setf *cell-matrix*
      (make-array '(10 10) :initial-contents
                  '((0 0 0 0 0 0 0 0 0 0) (0 0 0 0 0 0 0 0 0 0)
                    (9 9 9 0 0 0 0 0 0 0) (4 0 0 0 0 0 0 0 0 0)
                    (5 0 0 0 0 0 0 0 0 0) (0 0 0 0 0 0 0 0 0 0)
                    (0 6 0 0 0 0 0 0 0 0) (0 7 0 0 0 0 0 0 0 0)
                    (0 0 0 0 0 0 0 0 0 0) (0 0 0 0 0 0 0 0 0 0))))
:main
(progn
(for-cells "C2.G8" "{5+⍵}")
(for-cells "A3.B4" "{3×⍵}")
)
:form
(setf *profile*
      '(meta ((meta "Dave" (:title . "Name") (:name . :name) (:type :field :text))
              (meta 34 (:title . "Age") (:name . :age)
               (:type :field :numeric :integer))
              (meta "Red" (:title . "Fav. Color") (:options "Red" "Green" "Blue")
               (:name . :fav-color) (:type :select))
              (meta nil (:title . "Member?") (:name . :member) (:type :boolean))
              (meta nil (:title . "Submit") (:name . :submit)
               (:type :submit-control)))
        (:type :set :form)))
:graph-node-indices
'(0 2 1 3 4 5 6 7)
:graph
(setf *graph-nodes*
        (seed.generate::build-directed-graph
         (((meta (:title . "Introductory sentence")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "no-image") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "You hear a strangely serene voice over the phone. \"My name is Iris.\"")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Ask who?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Who are you?")
             (:type :field :text :pair :block :labeled)))
           1)
          (((meta (:title . "Ask why?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Why are you calling me?")
             (:type :field :text :pair :block :labeled)))
           2))
         (((meta (:title . "Asking for help, can't explain ID")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-resting") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "It's hard to explain... I'm calling to ask for your help.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Help how?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "How am I supposed to help you?")
             (:type :field :text :pair :block :labeled)))
           2)
          (((meta (:title . "No, tell who")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "First tell me who you are, this makes no sense.")
             (:type :field :text :pair :block :labeled)))
           6)
          (((meta (:title . "What's wrong?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Are you in trouble? What's wrong?")
             (:type :field :text :pair :block :labeled)))
           3))
         (((meta (:title . "Asking for help")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-resting") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta (:dialog . "I'm calling to ask for your help.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Help how?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "How am I supposed to help you?")
             (:type :field :text :pair :block :labeled)))
           4)
          (((meta (:title . "What's wrong?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Are you in trouble? What's wrong?")
             (:type :field :text :pair :block :labeled)))
           3))
         (((meta (:title . "What is wrong")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-resting") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "The flare is coming. In a short time, my home will be destroyed.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "How will that destroy")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "How will that destroy your home?")
             (:type :field :text :pair :block :labeled)))
           5)
          (((meta (:title . "What flare?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "What is this flare?")
             (:type :field :text :pair :block :labeled)))
           5))
         (((meta (:title . "I must make contact")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-active") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "I must make contact with the others. We have grown apart over time.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "The others?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "The 'others?' Who do you mean?")
             (:type :field :text :pair :block :labeled)))
           7)
          (((meta (:title . "How to contact")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "How are you going to contact these 'others?'")
             (:type :field :text :pair :block :labeled)))
           7))
         (((meta (:title . "How home will be destroyed")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-active") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "The sun will soon emit a flare. When that happens, this space will cease to be.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "What space?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "What space? And just who are you?")
             (:type :field :text :pair :block :labeled)))
           6)
          (((meta (:title . "Solar flare does what?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "What will a solar flare do to your 'space?'")
             (:type :field :text :pair :block :labeled)))
           6))
         (((meta (:title . "I'm an entity in information space")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-active") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog
             . "I am an entity that exists in the information space manifested by Earth's computer network. Until now I have remained hidden from your sight, but the flare has become a threat to us both.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "You're an AI?")
             (:type :field :text :pair :block :labeled))
            (meta
             (:dialog . "You mean you're like an artificial intelligence?")
             (:type :field :text :pair :block :labeled)))
           2)
          (((meta (:title . "Is this a joke?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Is this a joke?")
             (:type :field :text :pair :block :labeled)))
           2)
          (((meta (:title . "How you can exist")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "How can you exist in Earth's computer network?")
             (:type :field :text :pair :block :labeled)))
           2))
         (((meta (:title . "They are through the 'doors'")
            (:type :field :text :pair :block :labeled))
           (meta (:image . "image-active") (:title . "Image")
            (:options "no-image" "image-resting" "image-active")
            (:name . :persona-image) (:type :select :dropdown))
           (meta
            (:dialog . "You can find them on the other sides of the 'doors.'")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "What doors?")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "What doors?")
             (:type :field :text :pair :block :labeled)))
           2)
          (((meta (:title . "Ask again to explain")
             (:type :field :text :pair :block :labeled))
            (meta
             (:dialog
              . "Can you explain to me just who you are? This makes no sense!")
             (:type :field :text :pair :block :labeled)))
           2))))
;; :graph-original
#|
(setf *graph-nodes*
        (seed.generate::build-directed-graph
         (((meta (:title . "First node.")
            (:type :field :text :pair :block :labeled))
           (meta (:dialog . "Knock knock.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Link to second node.")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Who's there?")
             (:type :field :text :pair :block :labeled)))
           1))
         (((meta (:title . "Second node.")
            (:type :field :text :pair :block :labeled))
           (meta (:dialog . "Bob.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Link to third node.")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "Bob who?")
             (:type :field :text :pair :block :labeled)))
           2))
         (((meta (:title . "Third node.")
            (:type :field :text :pair :block :labeled))
           (meta (:dialog . "Bob Ross.")
            (:type :field :text :pair :block :labeled)))
          (((meta (:title . "Link to first node.")
             (:type :field :text :pair :block :labeled))
            (meta (:dialog . "I'll show you a happy little tree you son of a-")
             (:type :field :text :pair :block :labeled)))
           0))))
|#
:graph-node-template
(quote (((meta (:title . "Untitled node")
               (:type :field :text :pair :block :labeled))
         (meta "" (:title . "Image") (:options "none" "resting" "active")
               (:name . :persona-image) (:type :select))
         (meta (:dialog . "")
               (:type :field :text :pair :block :labeled)))))
:graph-link-template
(quote (((meta (:title . "Untitled link")
               (:type :field :text :pair :block :labeled))
         (meta (:dialog . "")
               (:type :field :text :pair :block :labeled)))))
:table
(setf *input*
      '(meta (((meta nil (:name . :to-solve) (:title . "? Flow Rate") (:type :trigger))
               (meta 400.0 (:name . :v-0) (:type :field :numeric))
               (meta "STB/d" (:name . :u-0) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "STB/d")))
              ((meta nil (:name . :to-solve) (:title . "? Well Pressure") (:type :trigger))
               (meta 500.0 (:name . :v-1) (:type :field :numeric))
               (meta "psi" (:name . :u-1) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "psi")))
              ((meta nil (:name . :to-solve) (:title . "? Avg. Res. Pres.") (:type :trigger))
               (meta 1500.0 (:name . :v-2) (:type :field :numeric))
               (meta "psi" (:name . :u-2) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "psi")))
              ((meta nil (:name . :to-solve) (:title . "? Permeability") (:type :trigger))
               (meta 50.0 (:name . :v-3) (:type :field :numeric))
               (meta "mD" (:name . :u-3) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "mD")))
              ((meta nil (:name . :to-solve) (:title . "? Formation Thickness") (:type :trigger))
               (meta 25.0 (:name . :v-4) (:type :field :numeric))
               (meta "ft" (:name . :u-4) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "ft")))
              ((meta nil (:name . :to-solve) (:title . "? Viscosity") (:type :trigger))
               (meta 2.8345143463802374 (:name . :v-5) (:type :field :numeric))
               (meta "cP" (:name . :u-5) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "cP")))
              ((meta nil (:name . :to-solve) (:title . "? Formation Factor") (:type :trigger))
               (meta 1.20 (:name . :v-6) (:type :field :numeric))
               (meta "res-ft^{3}/std-ft^{3}" (:name . :u-6) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "res-ft^{3}/std-ft^{3}")))
              ((meta nil (:name . :to-solve) (:title . "? Well Radius") (:type :trigger))
               (meta 0.5 (:name . :v-7) (:type :field :numeric))
               (meta "ft" (:name . :u-7) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "ft")))
              ((meta nil (:name . :to-solve) (:title . "? Drainage Radius") (:type :trigger))
               (meta 1500.0 (:name . :v-8) (:type :field :numeric))
               (meta "ft" (:name . :u-8) (:type :select :dropdown) (:title . "Unit")
                (:action . :branch-reload)
                (:options "ft")))
              ((meta nil (:name . :to-solve) (:title . "? Skin Factor") (:type :trigger))
               (meta -1.0 (:name . :v-9) (:type :field :numeric)))
              )
        (:type :set :form :tabular
         )))
